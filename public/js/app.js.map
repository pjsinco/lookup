{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["//$(document).ready(function() {\n\n    $('#location').tooltipster({\n        content: $('hiya')\n    });\n\n    var loc = {\n        city: '',\n        state: '',\n        zip: '',\n        lat: '',\n        lon: ''\n    };\n\n    /**\n     * Ajax in our random location and populate the location form field\n     *\n     */\n    function loadRandomLocation() {\n        $('#location').load('api/v1/locations/random', \n            function(responseText, textStatus, jqXHR) {\n                var json = JSON.parse(responseText);\n                loc.city = json.data.city;\n                loc.state = json.data.state;\n                loc.zip = json.data.zip;\n                loc.lat = json.data.lat;\n                loc.lon = json.data.lon;\n\n                $(this).val(json.data.city + ', ' + json.data.state + ' ' + json.data.zip );\n            $('.city').val(loc.city);\n            $('.state').val(loc.state);\n            $('.zip').val(loc.zip);\n            $('.lat').val(loc.lat);\n            $('.lon').val(loc.lon);\n        });\n    };\n\n\n    var locations = new Bloodhound({\n        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n        queryTokenizer: Bloodhound.tokenizers.whitespace,\n        limit: 10,\n        remote: {\n            url: 'api/v1/locations/search',\n            replace: function(url, query) {\n                return url + '?q=' + query;\n            },\n            filter: function(locations) {\n                return $.map(locations, function(d) {\n                    return $.map(d, function(e) {\n                        return {\n                            city: e.city,\n                            state: e.state,\n                            zip: e.zip,\n                            lat: e.lat,\n                            lon: e.lon,\n                            value: e.city + ', ' + e.state + ' ' + e.zip\n                        };\n                    });\n                });\n            }\n        }\n    }); \n\n    locations.initialize();\n\n    $('#location').typeahead({\n        hint: true,\n        highlight: true,\n        minLength: 3,\n    }, {\n        name: 'locations',\n        display: 'value',\n        source: locations.ttAdapter(),\n        templates: {\n            suggestion: function(data) {\n                return '<div>' + data.city + ', ' + data.state + ' ' +\n                    data.zip + '</div>';\n            }\n        },\n        engine: Hogan\n        \n    });\n\n    /**\n     * Debug Typeahead events\n     *\n     */\n    $('#location').bind('typeahead:selected', function(evt, suggestion, dataset) {\n        console.log(suggestion);\n        console.log(evt);\n        console.log(dataset);\n        loc.city = suggestion.city;\n        loc.state = suggestion.state;\n        loc.zip = suggestion.zip;\n        loc.lat = suggestion.lat;\n        loc.lon = suggestion.lon;\n    });\n\n\n//    $('#location').on('blur', function(evt) {\n//        $('.city').val(loc.city);\n//        $('.state').val(loc.state);\n//        $('.zip').val(loc.zip);\n//        $('.lat').val(loc.lat);\n//        $('.lon').val(loc.lon);\n//    });\n\n\n    /**\n     * Handle physician/specialty input\n     *\n     */\n\n    var physicians = new Bloodhound({\n        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n        queryTokenizer: Bloodhound.tokenizers.whitespace,\n        //limit: 7,\n        remote: {\n            url: 'api/v1/physicians/search',\n            replace: function(url, uriEncodedQuery) {\n                return url + '?name=' + uriEncodedQuery + '&city=' + loc.city;\n            },\n            //wildcard: '%QUERY',\n            filter: function(physicians) {\n                return $.map(physicians, function(d) {\n                    return $.map(d, function(e) {\n                        return {\n                            first_name: e.first_name,\n                            last_name: e.last_name,\n                            designation: e.designation,\n                            city: e.city,\n                            state: e.state,\n                            id: e.id,\n                            value: e.full_name\n                        };\n                    });\n                });\n            }\n        }\n    });\n\n    var specialties = new Bloodhound({\n        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n        queryTokenizer: Bloodhound.tokenizers.whitespace,\n        limit: 7,\n        remote: {\n            url: 'api/v1/specialties/search/%QUERY',\n\n        }\n\n    });\n\n    physicians.initialize();\n\n    $('#what').typeahead({\n        hint: false,\n        highlight: true,\n        minLength: 2,\n        //limit: 7,\n    }, {\n        name: 'physicians',\n        //limit: 7,\n        display: 'value',\n        source: physicians.ttAdapter(),\n        templates: {\n            header: '<h5 class=\"typeahead-subhead\">Physicians near [city, state]</h5>',\n            suggestion: function(data) {\n                // TODO\n                // remove hard-coded url\n                return '<div><a href=\"http://lookup.dev/physicians/' + data.id + '\">' + data.first_name + ' ' + data.last_name + ', ' +\n                    data.designation + '; ' + data.city + ', ' + data.state +\n                    '</a></div>';\n            }\n        }\n    });\n\n    /**\n     * Kickoff\n     *\n     */\n    loadRandomLocation();\n    \n//});\n"],"sourceRoot":"/source/"}